<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${company.name + 'UserList'}"></title>
<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
	rel="stylesheet">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="/css/dashboard.css">
<link rel="stylesheet" href="css/style.css">
<link
	href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
	rel="stylesheet" />
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
<style>
/* Toast Notification Styles */
.toast-container {
	position: fixed;
	top: 90vh;
	left: 20px;
	z-index: 1000;
}

.toast {
	padding: 15px 40px;
	border-radius: 4px;
	margin-bottom: 10px;
	color: white;
	display: flex;
	align-items: center;
	justify-content: space-between;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
	animation: slideIn 0.3s ease-out;
}

.toast-error {
	background-color: #ff4444;
}

.toast-success {
	background-color: #00C851;
}

.toast-close {
	background: none;
	border: none;
	color: white;
	cursor: pointer;
	margin-left: 10px;
	font-size: 16px;
}

@
keyframes slideIn {from { transform:translateX(100%);
	opacity: 0;
}

to {
	transform: translateX(0);
	opacity: 1;
}

}
@
keyframes fadeOut {to { opacity:0;
	
}
}
</style>
</head>
<body>
	<div class="app-container">
	<!-- Sidebar -->
		<aside class="sidebar">
			<div class="logo">
				<i class="fas fa-microchip"></i>
				<!-- For technology -->
				<div class="logo-text">
					<h1>[[${company.name}]]</h1>
					<p>The Best Tech Startup</p>
				</div>
			</div>
			<ul class="nav-menu">
				<li><a th:href="@{/company/dashboard/{id}(id=${company.id})}"
> <i
						class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
				</a></li>
				<li th:unless="${user.role == 'ROLE_USER'}"><a
					th:href="@{/company/{companyId}/company-user(companyId=${company.id})}">
						<i class="fas fa-user-plus"></i> <span>Add Sub-Admin</span>
				</a></li>
				<li><a
					th:href="@{/company/{companyId}/company-user-list(companyId=${company.id})}"
					href="/company/company-user-list" class="active"
					th:unless="${user.role == 'ROLE_USER'}"> <i
						class="fas fa-users-cog"></i> <span>View Sub-Admin</span>
				</a></li>
				<li><a
					th:href="@{/company/{id}/transactions/new(id=${company.id})}">
						<i class="fas fa-plus-circle"></i> <span>Add Transaction</span>
				</a></li>
				<li><a
					th:href="@{/company/{id}/transactions/list(id=${company.id})}">
						<i class="fas fa-list-alt"></i> <span>View Transaction</span>
				</a></li>
				 <li><a th:href="@{/company/{id}/change-password(id=${company.id})}"> <i class="fas fa-key"></i>
						<span>Change Password</span>
				</a></li>
				<li><a href="/logout"> <i class="fas fa-sign-out-alt"></i>
						<span>Logout</span>
				</a></li>
			</ul>

		</aside>


		<!-- Main Content -->
		<main class="main-content">
			<header class="header">
				<h2>User Management</h2>
			</header>


			<!-- Stats Cards -->
			<section class="stats-container">
				<article class="stat-card">
					<h3>Total USER</h3>
					<div class="value" th:text="${totalUsers}">1,600,000</div>
				</article>
				<article class="stat-card">
					<h3>Total ADMIN</h3>
					<div class="value" th:text="${adminCount}" style="color: green;">2,400</div>
				</article>
				<article class="stat-card">
					<h3>Total SUB-ADMIN</h3>
					<div class="value" th:text="${userCount}" style="color: blue;">13,000</div>
				</article>
			</section>
			<!-- Action Buttons -->
		<!-- Action Buttons -->
<div class="action-buttons">
    <a th:href="@{/admin/companies/{id}/company-user(id=${company.id})}">
        <button class="btn btn-secendary">+ ADD NEW USER</button>
    </a>
</div>
<br>

<!-- Recent Activity -->
<section class="recent-activity">
    <h3>View All Users</h3>
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Full Name</th>
                    <th>ROLE</th>
                    <th>Email</th>
                    <th>Contact No</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="u : ${users}">
                    <td th:text="${u.id}">uid</td>
                    <td th:text="${u.name}">John Doe</td>
                    <td th:text="${u.role == 'ROLE_ADMIN' ? 'ADMIN' : 'USER'}"
                        th:style="${u.role == 'ROLE_ADMIN'} ? 'color:green;font-weight:bold;' : 'color:blue;font-weight:bold;'">
                    </td>
                    <td th:text="${u.email}">user@example.com</td>
                    <td th:text="${u.mobileNo}">9800000000</td>
                    <td>
                        <a th:href="@{/company/{companyId}/company-edit/user(companyId=${company.id}, id=${u.id})}" 
                           class="download-edit">
                            <i class="fas fa-edit"></i> Edit
                        </a> 
                        | 
                        <a th:href="@{/company/{companyId}/company-delete-user(companyId=${company.id}, id=${u.id})}"
                           class="delete-btn"
                           onclick="return confirm('Are you sure you want to delete this record?');">
                            <i class="fas fa-trash"></i> Delete
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>



		</main>
	</div>
	<script type="js/main.js"></script>
</body>
</html>